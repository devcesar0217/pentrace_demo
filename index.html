<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>PenTrace Custom Signature Pad - Demo</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
				background-color: #f8f9fa;
				color: #333;
				line-height: 1.6;
			}

			.container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 20px;
			}

			.header {
				text-align: center;
				margin-bottom: 40px;
				padding: 30px;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: white;
				border-radius: 10px;
				box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			}

			.header h1 {
				font-size: 2.5rem;
				margin-bottom: 10px;
				font-weight: 300;
			}

			.header p {
				font-size: 1.1rem;
				opacity: 0.9;
			}

			.demo-section {
				background: white;
				margin-bottom: 30px;
				padding: 30px;
				border-radius: 10px;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			}

			.demo-section h2 {
				color: #495057;
				margin-bottom: 20px;
				font-size: 1.8rem;
				border-bottom: 2px solid #e9ecef;
				padding-bottom: 10px;
			}

			.signature-container {
				display: flex;
				gap: 30px;
				flex-wrap: wrap;
				align-items: flex-start;
			}

			.signature-pad-wrapper {
				flex: 1;
				min-width: 300px;
			}

			.signature-pad {
				border: 2px solid #dee2e6;
				border-radius: 8px;
				background: white;
				touch-action: none;
				display: block;
				width: 100%;
				height: 200px;
			}

			.signature-pad.drawing {
				border-color: #007bff;
				box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
			}

			.controls {
				margin-top: 15px;
				display: flex;
				gap: 10px;
				flex-wrap: wrap;
			}

			.btn {
				padding: 8px 16px;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				font-size: 14px;
				font-weight: 500;
				transition: all 0.2s ease;
				text-decoration: none;
				display: inline-block;
				text-align: center;
			}

			.btn-primary {
				background-color: #007bff;
				color: white;
			}

			.btn-primary:hover {
				background-color: #0056b3;
			}

			.btn-success {
				background-color: #28a745;
				color: white;
			}

			.btn-success:hover {
				background-color: #1e7e34;
			}

			.btn-danger {
				background-color: #dc3545;
				color: white;
			}

			.btn-danger:hover {
				background-color: #c82333;
			}

			.btn-secondary {
				background-color: #6c757d;
				color: white;
			}

			.btn-secondary:hover {
				background-color: #545b62;
			}

			.btn:disabled {
				opacity: 0.6;
				cursor: not-allowed;
			}

			.preview-area {
				flex: 1;
				min-width: 250px;
			}

			.preview-box {
				border: 2px solid #dee2e6;
				border-radius: 8px;
				padding: 20px;
				background: white;
				min-height: 200px;
				display: flex;
				align-items: center;
				justify-content: center;
				text-align: center;
				color: #6c757d;
			}

			.preview-box img {
				max-width: 100%;
				max-height: 180px;
				border: 1px solid #dee2e6;
				border-radius: 4px;
			}

			.status {
				margin-top: 15px;
				padding: 10px;
				border-radius: 4px;
				font-weight: 500;
			}

			.status.valid {
				background-color: #d4edda;
				color: #155724;
				border: 1px solid #c3e6cb;
			}

			.status.invalid {
				background-color: #f8d7da;
				color: #721c24;
				border: 1px solid #f5c6cb;
			}

			.settings-panel {
				background: #f8f9fa;
				padding: 20px;
				border-radius: 8px;
				margin-top: 20px;
			}

			.settings-panel h3 {
				margin-bottom: 15px;
				color: #495057;
			}

			.setting-group {
				display: flex;
				gap: 20px;
				margin-bottom: 15px;
				align-items: center;
				flex-wrap: wrap;
			}

			.setting-group label {
				font-weight: 500;
				min-width: 120px;
			}

			.setting-group input,
			.setting-group select {
				padding: 6px 10px;
				border: 1px solid #ced4da;
				border-radius: 4px;
				font-size: 14px;
			}

			.setting-group input[type="range"] {
				flex: 1;
				min-width: 150px;
			}

			.code-example {
				background: #f8f9fa;
				border: 1px solid #e9ecef;
				border-radius: 4px;
				padding: 20px;
				margin-top: 20px;
				overflow-x: auto;
			}

			.code-example pre {
				margin: 0;
				font-family: "Courier New", monospace;
				font-size: 14px;
				line-height: 1.4;
			}

			.features-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
				gap: 20px;
				margin-top: 20px;
			}

			.feature-card {
				background: white;
				padding: 20px;
				border-radius: 8px;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
				border-left: 4px solid #007bff;
			}

			.feature-card h4 {
				color: #007bff;
				margin-bottom: 10px;
				font-size: 1.2rem;
			}

			.feature-card ul {
				list-style: none;
				padding-left: 0;
			}

			.feature-card li {
				padding: 3px 0;
				position: relative;
				padding-left: 20px;
			}

			.feature-card li:before {
				content: "✓";
				position: absolute;
				left: 0;
				color: #28a745;
				font-weight: bold;
			}

			.responsive-demo {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 20px;
			}

			@media (max-width: 768px) {
				.signature-container {
					flex-direction: column;
				}

				.responsive-demo {
					grid-template-columns: 1fr;
				}

				.setting-group {
					flex-direction: column;
					align-items: flex-start;
				}

				.header h1 {
					font-size: 2rem;
				}
			}

			.loading {
				display: inline-block;
				width: 20px;
				height: 20px;
				border: 3px solid #f3f3f3;
				border-top: 3px solid #007bff;
				border-radius: 50%;
				animation: spin 1s linear infinite;
			}

			@keyframes spin {
				0% {
					transform: rotate(0deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="header">
				<h1>PenTrace Custom Signature Pad</h1>
				<p>
					Advanced signature capture library with touch support, validation, and
					multiple export formats
				</p>
			</div>

			<!-- Basic Demo Section -->
			<div class="demo-section">
				<h2>Basic Signature Pad</h2>
				<div class="signature-container">
					<div class="signature-pad-wrapper">
						<canvas id="signaturePad" class="signature-pad"></canvas>
						<div class="controls">
							<button id="clearBtn" class="btn btn-danger">Clear</button>
							<button id="validateBtn" class="btn btn-primary">Validate</button>
							<button id="downloadBtn" class="btn btn-success">
								Download PNG
							</button>
							<button id="downloadSvgBtn" class="btn btn-secondary">
								Download SVG
							</button>
						</div>
						<div id="status" class="status"></div>
					</div>
					<div class="preview-area">
						<div id="preview" class="preview-box">
							<span>Signature will appear here</span>
						</div>
						<h4>Preview</h4>
					</div>
				</div>
			</div>

			<!-- Customized Demo Section -->
			<div class="demo-section">
				<h2>Customized Signature Pad</h2>
				<div class="signature-container">
					<div class="signature-pad-wrapper">
						<canvas id="customSignaturePad" class="signature-pad"></canvas>
						<div class="controls">
							<button id="clearCustomBtn" class="btn btn-danger">Clear</button>
							<button id="downloadCustomBtn" class="btn btn-success">
								Download
							</button>
							<button id="printBtn" class="btn btn-secondary">Print</button>
						</div>
						<div id="customStatus" class="status"></div>
					</div>
					<div class="preview-area">
						<div id="jsonPreview" class="preview-box">
							<span>JSON data will appear here</span>
						</div>
						<h4>JSON Data</h4>
					</div>
				</div>
			</div>

			<!-- Settings Panel -->
			<div class="demo-section">
				<h2>Customization Settings</h2>
				<div class="settings-panel">
					<div class="setting-group">
						<label for="penColor">Pen Color:</label>
						<input type="color" id="penColor" value="#000000" />
					</div>
					<div class="setting-group">
						<label for="backgroundColor">Background:</label>
						<input type="color" id="backgroundColor" value="#ffffff" />
					</div>
					<div class="setting-group">
						<label for="minWidth">Min Width:</label>
						<input
							type="range"
							id="minWidth"
							min="0.5"
							max="3"
							step="0.1"
							value="0.5"
						/>
						<span id="minWidthValue">0.5</span>
					</div>
					<div class="setting-group">
						<label for="maxWidth">Max Width:</label>
						<input
							type="range"
							id="maxWidth"
							min="1"
							max="5"
							step="0.1"
							value="2.5"
						/>
						<span id="maxWidthValue">2.5</span>
					</div>
					<div class="setting-group">
						<label for="smoothing">Smoothing:</label>
						<input
							type="range"
							id="smoothing"
							min="0"
							max="1"
							step="0.1"
							value="0.5"
						/>
						<span id="smoothingValue">0.5</span>
					</div>
					<div class="setting-group">
						<button id="applySettings" class="btn btn-primary">
							Apply Settings
						</button>
					</div>
				</div>
			</div>

			<!-- Features Section -->
			<div class="demo-section">
				<h2>Features</h2>
				<div class="features-grid">
					<div class="feature-card">
						<h4>Touch & Mouse Support</h4>
						<ul>
							<li>Full touch device compatibility</li>
							<li>Mouse and stylus support</li>
							<li>Prevents scrolling on touch devices</li>
							<li>High DPI display support</li>
						</ul>
					</div>
					<div class="feature-card">
						<h4>Export Formats</h4>
						<ul>
							<li>PNG image export</li>
							<li>SVG vector export</li>
							<li>JSON data export</li>
							<li>Print functionality</li>
						</ul>
					</div>
					<div class="feature-card">
						<h4>Validation & Quality</h4>
						<ul>
							<li>Signature validation</li>
							<li>Minimum point requirements</li>
							<li>Distance-based validation</li>
							<li>Empty signature detection</li>
						</ul>
					</div>
					<div class="feature-card">
						<h4>Customization</h4>
						<ul>
							<li>Customizable pen colors</li>
							<li>Variable line width</li>
							<li>Background color options</li>
							<li>Smoothing controls</li>
						</ul>
					</div>
				</div>
			</div>

			<!-- Code Examples -->
			<div class="demo-section">
				<h2>Usage Examples</h2>

				<h3>Basic Implementation</h3>
				<div class="code-example">
					<pre><code>// Create signature pad
const canvas = document.getElementById('signaturePad');
const signaturePad = PenTrace.create(canvas);

// Clear signature
signaturePad.clear();

// Check if signature is valid
const isValid = signaturePad.isValid();

// Get signature as PNG
const pngData = signaturePad.toDataURL();

// Get signature as SVG
const svgData = signaturePad.toSVG();</code></pre>
				</div>

				<h3>Advanced Configuration</h3>
				<div class="code-example">
					<pre><code>// Create with custom options
const signaturePad = PenTrace.create(canvas, {
	penColor: '#ff0000',
	backgroundColor: '#f0f0f0',
	minWidth: 1,
	maxWidth: 3,
	smoothing: 0.8,
	onBegin: () => console.log('Started drawing'),
	onEnd: () => console.log('Finished drawing'),
	onSignatureChange: () => updatePreview()
});</code></pre>
				</div>

				<h3>Integration with Forms</h3>
				<div class="code-example">
					<pre><code>// Form submission example
document.getElementById('submitForm').addEventListener('click', function() {
	if (signaturePad.isValid()) {
		// Add signature data to form
		const signatureData = signaturePad.toDataURL();
		const hiddenInput = document.createElement('input');
		hiddenInput.type = 'hidden';
		hiddenInput.name = 'signature';
		hiddenInput.value = signatureData;
		document.getElementById('myForm').appendChild(hiddenInput);
		
		// Submit form
		document.getElementById('myForm').submit();
	} else {
		alert('Please provide a valid signature');
	}
});</code></pre>
				</div>
			</div>
		</div>

		<script src="pentrace.min.js"></script>
		<script>
			// Global variables
			let signaturePad, customSignaturePad;

			// Initialize signature pads when page loads
			document.addEventListener("DOMContentLoaded", function () {
				initializeBasicSignaturePad();
				initializeCustomSignaturePad();
				setupEventListeners();
				setupSettingsPanel();
			});

			function initializeBasicSignaturePad() {
				const canvas = document.getElementById("signaturePad");
				signaturePad = PenTrace.create(canvas, {
					onBegin: function () {
						canvas.classList.add("drawing");
					},
					onEnd: function () {
						canvas.classList.remove("drawing");
						updatePreview();
						updateStatus();
					},
					onSignatureChange: function () {
						updatePreview();
						updateStatus();
					},
				});
			}

			function initializeCustomSignaturePad() {
				const canvas = document.getElementById("customSignaturePad");
				customSignaturePad = PenTrace.create(canvas, {
					penColor: "#ff6b6b",
					backgroundColor: "#f8f9fa",
					minWidth: 1,
					maxWidth: 3,
					smoothing: 1,
					onBegin: function () {
						canvas.classList.add("drawing");
					},
					onEnd: function () {
						canvas.classList.remove("drawing");
						updateJsonPreview();
						updateCustomStatus();
					},
					onSignatureChange: function () {
						updateJsonPreview();
						updateCustomStatus();
					},
				});
			}

			function setupEventListeners() {
				// Basic signature pad controls
				document
					.getElementById("clearBtn")
					.addEventListener("click", function () {
						signaturePad.clear();
						updatePreview();
						updateStatus();
					});

				document
					.getElementById("validateBtn")
					.addEventListener("click", function () {
						updateStatus();
					});

				document
					.getElementById("downloadBtn")
					.addEventListener("click", function () {
						if (signaturePad.isValid()) {
							PenTrace.utils.downloadSignature(
								signaturePad,
								"signature",
								"png"
							);
						} else {
							alert("Please provide a valid signature before downloading");
						}
					});

				document
					.getElementById("downloadSvgBtn")
					.addEventListener("click", function () {
						if (signaturePad.isValid()) {
							PenTrace.utils.downloadSignature(
								signaturePad,
								"signature",
								"svg"
							);
						} else {
							alert("Please provide a valid signature before downloading");
						}
					});

				// Custom signature pad controls
				document
					.getElementById("clearCustomBtn")
					.addEventListener("click", function () {
						customSignaturePad.clear();
						updateJsonPreview();
						updateCustomStatus();
					});

				document
					.getElementById("downloadCustomBtn")
					.addEventListener("click", function () {
						if (customSignaturePad.isValid()) {
							PenTrace.utils.downloadSignature(
								customSignaturePad,
								"custom-signature",
								"json"
							);
						} else {
							alert("Please provide a valid signature before downloading");
						}
					});

				document
					.getElementById("printBtn")
					.addEventListener("click", function () {
						if (customSignaturePad.isValid()) {
							PenTrace.utils.printSignature(customSignaturePad);
						} else {
							alert("Please provide a valid signature before printing");
						}
					});
			}

			function setupSettingsPanel() {
				const penColorInput = document.getElementById("penColor");
				const backgroundColorInput = document.getElementById("backgroundColor");
				const minWidthInput = document.getElementById("minWidth");
				const maxWidthInput = document.getElementById("maxWidth");
				const smoothingInput = document.getElementById("smoothing");
				const applyBtn = document.getElementById("applySettings");

				// Update value displays
				minWidthInput.addEventListener("input", function () {
					document.getElementById("minWidthValue").textContent = this.value;
				});

				maxWidthInput.addEventListener("input", function () {
					document.getElementById("maxWidthValue").textContent = this.value;
				});

				smoothingInput.addEventListener("input", function () {
					document.getElementById("smoothingValue").textContent = this.value;
				});

				// Apply settings
				applyBtn.addEventListener("click", function () {
					const settings = {
						penColor: penColorInput.value,
						backgroundColor: backgroundColorInput.value,
						minWidth: parseFloat(minWidthInput.value),
						maxWidth: parseFloat(maxWidthInput.value),
						smoothing: parseFloat(smoothingInput.value),
					};

					// Apply to custom signature pad
					customSignaturePad.setPenColor(settings.penColor);
					customSignaturePad.setBackgroundColor(settings.backgroundColor);
					customSignaturePad.setLineWidth(settings.minWidth, settings.maxWidth);
					customSignaturePad.options.smoothing = settings.smoothing;

					// Show loading state
					applyBtn.innerHTML = '<span class="loading"></span> Applying...';
					applyBtn.disabled = true;

					setTimeout(() => {
						applyBtn.innerHTML = "Apply Settings";
						applyBtn.disabled = false;
						updateJsonPreview();
						updateCustomStatus();
					}, 500);
				});
			}

			function updatePreview() {
				const preview = document.getElementById("preview");
				if (signaturePad && signaturePad.isValid()) {
					const dataUrl = signaturePad.toDataURL();
					preview.innerHTML = `<img src="${dataUrl}" alt="Signature Preview">`;
				} else {
					preview.innerHTML = "<span>Signature will appear here</span>";
				}
			}

			function updateJsonPreview() {
				const preview = document.getElementById("jsonPreview");
				if (customSignaturePad && customSignaturePad.isValid()) {
					const jsonData = customSignaturePad.toJSON();
					preview.innerHTML = `<pre style="font-size: 12px; text-align: left; overflow: auto; max-height: 180px;">${JSON.stringify(
						jsonData,
						null,
						2
					)}</pre>`;
				} else {
					preview.innerHTML = "<span>JSON data will appear here</span>";
				}
			}

			function updateStatus() {
				const status = document.getElementById("status");
				if (!signaturePad) return;

				if (signaturePad.isValid()) {
					status.textContent = "✓ Valid signature";
					status.className = "status valid";
				} else if (signaturePad.isEmpty()) {
					status.textContent = "Please provide a signature";
					status.className = "status invalid";
				} else {
					status.textContent = "✗ Invalid signature (too short)";
					status.className = "status invalid";
				}
			}

			function updateCustomStatus() {
				const status = document.getElementById("customStatus");
				if (!customSignaturePad) return;

				if (customSignaturePad.isValid()) {
					status.textContent = "✓ Valid signature";
					status.className = "status valid";
				} else if (customSignaturePad.isEmpty()) {
					status.textContent = "Please provide a signature";
					status.className = "status invalid";
				} else {
					status.textContent = "✗ Invalid signature (too short)";
					status.className = "status invalid";
				}
			}

			// Demo validation function
			function validateAllSignatures() {
				const results = PenTrace.utils.validateAll();
				console.log("Validation Results:", results);

				let message = "Signature Validation Results:\n";
				results.forEach((result, index) => {
					message += `Signature ${index + 1}: ${
						result.isValid ? "Valid" : "Invalid"
					}\n`;
				});

				alert(message);
			}

			// Add keyboard shortcuts
			document.addEventListener("keydown", function (e) {
				if (e.ctrlKey || e.metaKey) {
					switch (e.key) {
						case "s":
							e.preventDefault();
							if (signaturePad && signaturePad.isValid()) {
								PenTrace.utils.downloadSignature(
									signaturePad,
									"signature",
									"png"
								);
							}
							break;
						case "d":
							e.preventDefault();
							if (signaturePad) {
								signaturePad.clear();
								updatePreview();
								updateStatus();
							}
							break;
					}
				}
			});
		</script>
	</body>
</html>
